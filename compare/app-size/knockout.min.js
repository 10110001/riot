(function(){"use strict";var t=13;ko.bindingHandlers.enterKey={init:function(e,o,n,i){var r,u;r=function(e,n){if(n.keyCode===t){o().call(this,e,n)}};u=function(){return{keyup:r}};ko.bindingHandlers.event.init(e,u,n,i)}};ko.bindingHandlers.selectAndFocus={init:function(t,e,o){ko.bindingHandlers.hasfocus.init(t,e,o);ko.utils.registerEventHandler(t,"focus",function(){t.focus()})},update:function(t,e){ko.utils.unwrapObservable(e());setTimeout(function(){ko.bindingHandlers.hasfocus.update(t,e)},0)}};var e=function(t,e){this.title=ko.observable(t);this.completed=ko.observable(e);this.editing=ko.observable(false)};var o=function(t){var o=this;o.todos=ko.observableArray(ko.utils.arrayMap(t,function(t){return new e(t.title,t.completed)}));o.current=ko.observable();o.showMode=ko.observable("all");o.filteredTodos=ko.computed(function(){switch(o.showMode()){case"active":return o.todos().filter(function(t){return!t.completed()});case"completed":return o.todos().filter(function(t){return t.completed()});default:return o.todos()}});o.add=function(){var t=o.current().trim();if(t){o.todos.push(new e(t));o.current("")}};o.remove=function(t){o.todos.remove(t)};o.removeCompleted=function(){o.todos.remove(function(t){return t.completed()})};o.editItem=function(t){t.editing(true)};o.stopEditing=function(t){t.editing(false);if(!t.title().trim()){o.remove(t)}};o.completedCount=ko.computed(function(){return ko.utils.arrayFilter(o.todos(),function(t){return t.completed()}).length});o.remainingCount=ko.computed(function(){return o.todos().length-o.completedCount()});o.allCompleted=ko.computed({read:function(){return!o.remainingCount()},write:function(t){ko.utils.arrayForEach(o.todos(),function(e){e.completed(t)})}});o.getLabel=function(t){return ko.utils.unwrapObservable(t)===1?"item":"items"};ko.computed(function(){localStorage.setItem("todos-knockoutjs",ko.toJSON(o.todos))}).extend({throttle:500})};var n=ko.utils.parseJson(localStorage.getItem("todos-knockoutjs"));var i=new o(n||[]);ko.applyBindings(i);Router({"/:filter":i.showMode}).init()})();