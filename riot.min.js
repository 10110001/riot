/* Riot 0.9.8, @license MIT, (c) 2014 Moot Inc + contributors */
(function(t){"use strict";t.observable=function(t){var e={},n=[].slice;t.on=function(n,r){if(typeof r==="function"){n.replace(/[^\s]+/g,function(t,n){(e[t]=e[t]||[]).push(r);r.typed=n>0})}return t};t.off=function(n){n.replace(/[^\s]+/g,function(t){e[t]=[]});if(n=="*")e={};return t};t.one=function(e,n){if(n)n.one=true;return t.on(e,n)};t.trigger=function(r){var o=n.call(arguments,1),u=e[r]||[];for(var i=0,f;f=u[i];++i){if(!(f.one&&f.done||f.busy)){f.busy=true;f.apply(t,f.typed?[r].concat(o):o);f.done=true;f.busy=false}}return t};return t};var e={},n=function(t){return t||t===0?(t+"").replace(/[&\"<>]/g,function(t){return u[t]}):""},r=function(t){return t},o={"\\":"\\\\","\n":"\\n","\r":"\\r","'":"\\'"},u={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};t.render=function(t,u,i){i=typeof i=="function"?i:i===false?r:n;t=t?t:"";return(e[t]=e[t]||new Function("_","e","return '"+t.replace(/[\\\n\r']/g,function(t){return o[t]}).replace(/{\s*([\w\.]+)\s*}/g,"'+(function(){try{return e(_.$1)}catch(e){return ''}})()+'")+"'"))(u,i)};if(typeof top!="object")return;var i,f=t.observable({}),c=window.addEventListener,a=document;function p(t){t=t.type?location.hash:t;if(t!=i)f.trigger("pop",t);i=t}if(c){c("popstate",p,false);a.addEventListener("DOMContentLoaded",p,false)}else{a.attachEvent("onreadystatechange",function(){if(a.readyState==="complete")p("")})}t.route=function(t){if(typeof t==="function")return f.on("pop",t);if(history.pushState)history.pushState(0,0,t);p(t)}})(typeof top=="object"?window.$||(window.$={}):exports);